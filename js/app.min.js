'use strict';const TopHairCollections={cart:[],config:{currency:'‚Ç¶',whatsappNumber:'2347031696283',paystackUrl:'https://paystack.com/pay/',storageKey:'topHairCart'},init(){this.loadCartFromStorage();this.displayCart();setupSearchListeners()},loadCartFromStorage(){try{const saved=localStorage.getItem(this.config.storageKey);if(saved)this.cart=JSON.parse(saved)}catch(e){console.error('Error loading cart:',e)}},saveCartToStorage(){try{localStorage.setItem(this.config.storageKey,JSON.stringify(this.cart))}catch(e){console.error('Error saving cart:',e)}}};function addToCart(name,price,qty=1){if(!name||!price||price<=0){showNotification('Invalid product','error');return}const existing=TopHairCollections.cart.find(i=>i.name===name);if(existing){existing.quantity+=qty;existing.totalPrice=existing.quantity*existing.unitPrice}else{TopHairCollections.cart.push({id:Date.now(),name:name,unitPrice:price,quantity:qty,totalPrice:price*qty})}TopHairCollections.saveCartToStorage();displayCart();showNotification(`${name} added to cart!`,'success')}function removeFromCart(id){const idx=TopHairCollections.cart.findIndex(i=>i.id===id);if(idx!==-1){const name=TopHairCollections.cart[idx].name;TopHairCollections.cart.splice(idx,1);TopHairCollections.saveCartToStorage();displayCart();showNotification(`${name} removed`,'info')}}function displayCart(){const cartEl=document.getElementById('cartItems');const totalEl=document.getElementById('total');if(!cartEl||!totalEl)return;if(TopHairCollections.cart.length===0){cartEl.innerHTML='<p style="color:#999">Your cart is empty</p>';totalEl.textContent=TopHairCollections.config.currency+'0';return}let html='';let total=0;TopHairCollections.cart.forEach(item=>{total+=item.totalPrice;html+=`<div style="border-bottom:1px solid rgba(255,215,0,.2);padding:10px 0;margin:10px 0"><div style="display:flex;justify-content:space-between;align-items:center"><div><strong>${item.name}</strong><br><small>${TopHairCollections.config.currency}${item.unitPrice.toLocaleString()} √ó ${item.quantity}</small></div><div style="text-align:right"><strong>${TopHairCollections.config.currency}${item.totalPrice.toLocaleString()}</strong><br><button onclick="removeFromCart(${item.id})" style="background:#f44;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px;margin-top:5px">Remove</button></div></div></div>`});cartEl.innerHTML=html;totalEl.textContent=TopHairCollections.config.currency+total.toLocaleString()}function checkout(){if(TopHairCollections.cart.length===0){showNotification('Your cart is empty!','error');return}const total=TopHairCollections.cart.reduce((s,i)=>s+i.totalPrice,0);const count=TopHairCollections.cart.reduce((s,i)=>s+i.quantity,0);alert(`Thank you for your order!\n\nItems: ${count}\nTotal: ${TopHairCollections.config.currency}${total.toLocaleString()}\n\nYou will be redirected to complete your order.`)}function payOnline(){if(TopHairCollections.cart.length===0){showNotification('Your cart is empty!','error');return}const total=TopHairCollections.cart.reduce((s,i)=>s+i.totalPrice,0);if(confirm(`Proceed to pay ${TopHairCollections.config.currency}${total.toLocaleString()} online?`)){window.location.href=TopHairCollections.config.paystackUrl}}function trackOrder(){const input=document.getElementById('trackCode');const result=document.getElementById('trackResult');if(!input||!result)return;const code=input.value.trim();if(code===''){showNotification('Please enter tracking code','error');result.innerHTML='';return}result.innerHTML='<p style="color:#ffd700">üîç Looking up your order...</p>';setTimeout(()=>{const statuses=[{status:'Order Confirmed',icon:'‚úÖ',msg:'Your order has been confirmed and is being prepared.'},{status:'Processing',icon:'üì¶',msg:'Your order is being packaged with care.'},{status:'In Transit',icon:'üöö',msg:'Your order is on the way! Expected delivery in 2-4 days.'},{status:'Out for Delivery',icon:'üöõ',msg:'Your order is out for delivery today!'},{status:'Delivered',icon:'üéâ',msg:'Your order has been delivered. Enjoy your premium hair!'}];const s=statuses[Math.floor(Math.random()*statuses.length)];result.innerHTML=`<div style="background:rgba(255,215,0,.1);border:2px solid gold;border-radius:8px;padding:20px;margin-top:20px"><h3 style="color:gold;margin:0 0 15px">${s.icon} ${s.status}</h3><p style="margin:10px 0"><strong>Tracking Code:</strong> ${code}</p><p style="margin:10px 0"><strong>Status:</strong> ${s.msg}</p></div>`},1000)}function showNotification(msg,type='info'){const existing=document.querySelector('.notification');if(existing)existing.remove();const notif=document.createElement('div');notif.className='notification';notif.textContent=msg;const colors={success:'#4CAF50',error:'#f44336',info:'#2196F3'};notif.style.cssText=`position:fixed;top:20px;right:20px;background:${colors[type]||colors.info};color:#fff;padding:15px 25px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:10000;font-weight:700;animation:slideIn .3s ease-out`;document.body.appendChild(notif);setTimeout(()=>{notif.style.animation='slideOut .3s ease-out';setTimeout(()=>notif.remove(),300)},3000)}function searchProducts(query){const products=document.querySelectorAll('.item');const term=query.toLowerCase().trim();let count=0;products.forEach(p=>{const name=p.querySelector('h3')?.textContent.toLowerCase()||'';const desc=p.querySelector('p')?.textContent.toLowerCase()||'';if(term===''||name.includes(term)||desc.includes(term)){p.style.display='inline-block';count++}else{p.style.display='none'}});handleNoResults(count,term)}function performSearch(){const input=document.getElementById('productSearch');if(!input)return;const query=input.value.trim();if(query===''){showNotification('Please enter a search term','info');return}searchProducts(query);showNotification(`Searching for "${query}"...`,'info')}function clearSearch(){const input=document.getElementById('productSearch');if(input)input.value='';const products=document.querySelectorAll('.item');products.forEach(p=>p.style.display='inline-block');const noRes=document.querySelector('.no-results');if(noRes)noRes.remove();showNotification('Search cleared','info')}function handleNoResults(count,term){const section=document.querySelector('.products');let noRes=document.querySelector('.no-results');if(count===0&&term){if(!noRes){noRes=document.createElement('div');noRes.className='no-results';section.appendChild(noRes)}noRes.innerHTML=`<p style="font-size:24px;margin-bottom:10px">üòî</p><p>No products found for "<strong>${term}</strong>"</p><p style="font-size:14px;margin-top:10px">Try different keywords or <button onclick="clearSearch()" style="color:#ff1493;text-decoration:underline;background:none;border:none;cursor:pointer;font-size:14px">clear your search</button></p>`}else if(noRes){noRes.remove()}}function setupSearchListeners(){const input=document.getElementById('productSearch');if(input){input.addEventListener('input',e=>searchProducts(e.target.value));input.addEventListener('keypress',e=>{if(e.key==='Enter')performSearch()})}}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>TopHairCollections.init())}else{TopHairCollections.init()}const style=document.createElement('style');style.textContent='@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}';document.head.appendChild(style);
